[core]
name:设置-鹰眼
class:CustomUnitMetadata
price:4000
maxHp:6000
#onNewMapSpawn:spawnPoint_eachActiveTeam
mass:90000
techLevel:2
buildSpeed:65s
#availableInDemo:true
radius:30
isBio:false
showInEditor:false
tags:发射器
showOnMinimap:true
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
canNotBeDamaged: true
canNotBeDirectlyAttacked: true
disableDeathOnZeroHp:true
selfRegenRate:999999
isUnselectable:false
hideScorchMark: true
isBuilding:true
numBitsOnDeath:10

@memory teamID:number
@memory find:Boolean

@memory pw1:number
@memory pw2:number
@memory pw3:number
@memory pw4:number

@memory password:number
@memory now:number

[resource_djs]
hidden:true

[hiddenAction_开始设置]
autoTriggerOnEvent:created
setUnitMemory:now=0

[resource_1]
hidden:true

[hiddenAction_结束]
autoTrigger:if self.teamDefeatedTech() and self.resource.1 != 1
deleteSelf:true

[hiddenAction_初始队伍]
autoTriggerOnEvent:created
setUnitMemory:teamID=-1

[action_信息显示]
text:\n显示信息\n
price:0
pos:0.9
displayType:action
iconExtraImage:ROOT:[WarField][战争之地]/-shared-/-贴图-/select_open.png
alwaysSinglePress:true
addResources:setFlag:31
buildSpeed:0s
isLocked:if memory.teamID <= -1
isLockedMessage:请先选择要查询的队伍
isVisible:if not self.hasFlag(id=31)

[action_信息显示关闭]
text:\n关闭显示\n
price:0
pos:0.9
displayType:action
iconExtraImage:ROOT:[WarField][战争之地]/-shared-/-贴图-/select_open.png
alwaysSinglePress:true
addResources:unsetFlag:31
buildSpeed:0s
isVisible:if self.hasFlag(id=31)

[action_队伍显示111]
text:查找:\n%{attacking.teamId+1}号\n%{attacking.playerName}
price:0
pos:1
displayType:infoOnlyNoBox
isActive:false
buildSpeed:0s
isVisible:if self.hasFlag(id=31) and not self.hasFlag(id=29)
#description:-
alwaysSinglePress:true
description:---队伍信息---\n队伍ID:%{attacking.teamId+1}\n队伍名称:%{attacking.playerName}

[action_队伍显示222]
text:隶属:\n%{attacking.teamName}队\n%{attacking.playerName}
price:0
pos:1
displayType:infoOnlyNoBox
isActive:false
buildSpeed:0s
isVisible:if self.hasFlag(id=31) and not self.hasFlag(id=29)
#description:-
alwaysSinglePress:true
description:---队伍信息---\n队伍ID:%{attacking.teamId+1}\n队伍名称:%{attacking.playerName}

[action_资源无法显示]
text:<无信息>
description:没有检查到%{memory.teamID+1}号队伍的任何资源
price:0
pos:1
displayType:infoOnlyNoBox
isActive:false
buildSpeed:0s
isVisible:if self.hasFlag(id=31) and self.hasFlag(id=29)

[action_资源无法显示2]
text:<无信息>
description:没有检查到%{memory.teamID+1}号队伍的任何资源
price:0
pos:1
displayType:infoOnlyNoBox
isActive:false
buildSpeed:0s
isVisible:if self.hasFlag(id=31) and self.hasFlag(id=29)


[action_资源显示]
text:<找到信息>\n资源信息\n点击查看
description:资金:%{attacking.resource(type="credits")}\n人口:%{attacking.resource(type="rk")}\n石油:%{attacking.resource(type="rk")}\n特殊子弹:%{attacking.resource(type="ts")}\n大型子弹:%{attacking.resource(type="dx")}\n普通子弹:%{attacking.resource(type="pt")}\n等级点数:%{attacking.resource.djds1}\n升级点数:%{attacking.resource(type="sjd")}
price:0
pos:1
displayType:infoOnlyNoBox
isActive:false
buildSpeed:0s
isVisible:if self.hasFlag(id=31) and not self.hasFlag(id=29)

[action_队伍显示]
text:<找到信息>\n队伍信息\n点击查看
description:队伍ID:%{attacking.teamId+1}\n队伍名称:%{attacking.playerName}\n存活时间(仅计时):%{self.timeAlive()}\n---建筑信息---\n('true'为'是';'false'为'否')\n是否有研究中心:%{attacking.hasUnitInTeam(withTag='研究中心',greaterThan=0)}\n是否有模块中心:%{attacking.hasUnitInTeam(withTag='模块中心',greaterThan=0)}\n是否有战略中心:%{attacking.hasUnitInTeam(withTag='战略中心',greaterThan=0)}\n是否有实验工厂:%{attacking.hasUnitInTeam(withTag='实验工厂',greaterThan=0)}\n是否有核弹发射井:%{attacking.hasUnitInTeam(withTag='核弹发射井',greaterThan=0)}\n是否有反核装置:%{attacking.hasUnitInTeam(withTag='反核装置',greaterThan=0)}
price:0
pos:1
displayType:infoOnlyNoBox
isActive:false
buildSpeed:0s
isVisible:if self.hasFlag(id=31) and not self.hasFlag(id=29)


[action_队伍设置]
text:\n队伍设置\n
price:0
pos:0.9
displayType:action
iconExtraImage:ROOT:[WarField][战争之地]/-shared-/-贴图-/select_open.png
alwaysSinglePress:true
addResources:setFlag:30
buildSpeed:0s
isVisible:if not self.hasFlag(id=30)

[action_队伍设置关闭]
text:\n关闭队伍设置\n
price:0
pos:0.9
displayType:action
iconExtraImage:ROOT:[WarField][战争之地]/-shared-/-贴图-/select_open.png
alwaysSinglePress:true
addResources:unsetFlag:30
buildSpeed:0s
isVisible:if self.hasFlag(id=30)

[action_选择1号l]
setUnitMemory:teamID=0,find=false
text:1号队伍
isVisible:if self.hasFlag(id=30)
alwaysSinglePress:true
description:侦查该队伍的信息
ai_isHighPriority:false
pos:1
clearActiveWaypoint:true
isLocked:if self.teamId == 0
isLockedMessage:你自己的资源难道不知道吗？
displayType:infoOnly
buildSpeed:0

[action_选择2号]
setUnitMemory:teamID=1,find=false
text:2号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 1
isLocked:if self.teamId == 1
@copyFromSection:action_选择1号l

[action_选择3号]
setUnitMemory:teamID=2,find=false
text:3号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 2
isLocked:if self.teamId == 2
@copyFromSection:action_选择1号l

[action_选择4号]
setUnitMemory:teamID=3,find=false
text:4号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 3
isLocked:if self.teamId == 3
@copyFromSection:action_选择1号l

[action_选择5号]
setUnitMemory:teamID=4,find=false
text:5号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 4
isLocked:if self.teamId == 4
@copyFromSection:action_选择1号l

[action_选择6号]
setUnitMemory:teamID=5,find=false
text:6号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 5
isLocked:if self.teamId == 5
@copyFromSection:action_选择1号l

[action_选择7号]
setUnitMemory:teamID=6,find=false
text:7号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 6
isLocked:if self.teamId == 6
@copyFromSection:action_选择1号l

[action_选择8号]
setUnitMemory:teamID=7,find=false
text:8号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 7
isLocked:if self.teamId == 7
@copyFromSection:action_选择1号l

[action_选择9号]
setUnitMemory:teamID=8,find=false
text:9号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 8
isLocked:if self.teamId == 8
@copyFromSection:action_选择1号l

[action_选择10号]
setUnitMemory:teamID=9,find=false
text:10号队伍
isVisible:if self.hasFlag(id=30) and self.teamId != 9
@copyFromSection:action_选择1号l
isLocked:if self.teamId == 9


#-----查找系统-----

[hiddenAction_失败]
addResources:setFlag:29

[hiddenAction_成功]
addResources:unsetFlag:29

[hiddenAction_查找中]
autoTrigger:if memory.teamID == 0 and memory.find != true
addWaypoint_target_nearestUnit_team:any
addWaypoint_target_nearestUnit_tagged:0
addWaypoint_type:attack
clearActiveWaypoint:true
addWaypoint_triggerActionIfFailed:失败
addWaypoint_triggerActionIfMatched:成功
addWaypoint_target_nearestUnit_maxRange:99999

[hiddenAction_查找中1]
autoTrigger:if memory.teamID == 1 and memory.find != true
addWaypoint_target_nearestUnit_tagged:1
@copyFromSection:hiddenAction_查找中

[hiddenAction_查找中2]
autoTrigger:if memory.teamID == 2 and memory.find != true
addWaypoint_target_nearestUnit_tagged:2
@copyFromSection:hiddenAction_查找中

[hiddenAction_查找中3]
autoTrigger:if memory.teamID == 3 and memory.find != true
addWaypoint_target_nearestUnit_tagged:3
@copyFromSection:hiddenAction_查找中

[hiddenAction_查找中4]
autoTrigger:if memory.teamID == 4 and memory.find != true
addWaypoint_target_nearestUnit_tagged:4
@copyFromSection:hiddenAction_查找中

[hiddenAction_查找中5]
autoTrigger:if memory.teamID == 5 and memory.find != true
addWaypoint_target_nearestUnit_tagged:5
@copyFromSection:hiddenAction_查找中

[hiddenAction_查找中6]
autoTrigger:if memory.teamID == 6 and memory.find != true
addWaypoint_target_nearestUnit_tagged:6
@copyFromSection:hiddenAction_查找中

[hiddenAction_查找中7]
autoTrigger:if memory.teamID == 7 and memory.find != true
addWaypoint_target_nearestUnit_tagged:7
@copyFromSection:hiddenAction_查找中

[hiddenAction_查找中8]
autoTrigger:if memory.teamID == 8 and memory.find != true
addWaypoint_target_nearestUnit_tagged:8
@copyFromSection:hiddenAction_查找中

[hiddenAction_查找中9]
autoTrigger:if memory.teamID == 9 and memory.find != true
addWaypoint_target_nearestUnit_tagged:9
@copyFromSection:hiddenAction_查找中

#--查找成功--

[hiddenAction_查找成功]
autoTrigger:if memory.teamID == 0 and memory.find != true and attacking.tags(includes='0')
setUnitMemory:find=true

[hiddenAction_查找成功1]
autoTrigger:if memory.teamID == 1 and memory.find != true and attacking.tags(includes='1')
@copyFromSection:hiddenAction_查找成功

[hiddenAction_查找成功2]
autoTrigger:if memory.teamID == 2 and memory.find != true and attacking.tags(includes='2')
@copyFromSection:hiddenAction_查找成功

[hiddenAction_查找成功3]
autoTrigger:if memory.teamID == 3 and memory.find != true and attacking.tags(includes='3')
@copyFromSection:hiddenAction_查找成功

[hiddenAction_查找成功4]
autoTrigger:if memory.teamID == 4 and memory.find != true and attacking.tags(includes='4')
@copyFromSection:hiddenAction_查找成功

[hiddenAction_查找成功5]
autoTrigger:if memory.teamID == 5 and memory.find != true and attacking.tags(includes='5')
@copyFromSection:hiddenAction_查找成功

[hiddenAction_查找成功6]
autoTrigger:if memory.teamID == 6 and memory.find != true and attacking.tags(includes='6')
@copyFromSection:hiddenAction_查找成功

[hiddenAction_查找成功7]
autoTrigger:if memory.teamID == 7 and memory.find != true and attacking.tags(includes='7')
@copyFromSection:hiddenAction_查找成功

[hiddenAction_查找成功8]
autoTrigger:if memory.teamID == 8 and memory.find != true and attacking.tags(includes='8')
@copyFromSection:hiddenAction_查找成功

[hiddenAction_查找成功9]
autoTrigger:if memory.teamID == 9 and memory.find != true and attacking.tags(includes='9')
@copyFromSection:hiddenAction_查找成功

[action_T2]
addResources:hfjs:2
isVisible:false

[decal_重载]
isVisible:false

[decal_重载2]
isVisible:false

[action_灭火辅助]
text:开启辅助灭火
description:开启后\n如果单位着火,则在着火5s后自动灭火
displayType:action
buildSpeed:2s
pos:1
addGlobalTeamTags:灭火辅助
isVisible:if not self.hasFlag(id=31)
addResources:setFlag:31

[action_灭火辅助关闭]
text:关闭辅助灭火
displayType:action
buildSpeed:2s
removeGlobalTeamTags:灭火辅助
pos:1
isVisible:if self.hasFlag(id=31)
addResources:unsetFlag:31

[action_换弹]
text:开启辅助换弹
description:开启后\n如果单位15s后没有攻击\n则自动进行换弹
displayType:action
buildSpeed:2s
pos:1
addGlobalTeamTags:换弹辅助
isVisible:if not self.hasFlag(id=30)
addResources:setFlag:30

[action_换弹辅助关闭]
text:关闭辅助换弹
displayType:action
buildSpeed:2s
removeGlobalTeamTags:换弹辅助
pos:1
isVisible:if self.hasFlag(id=30)
addResources:unsetFlag:30

[action_挺火]
text:开启停火功能
description:开启后\n单位可以手动选择是否可以开火
displayType:action
buildSpeed:2s
pos:1
addGlobalTeamTags:停火辅助
isVisible:if not self.hasFlag(id=29)
addResources:setFlag:29

[action_停火辅助关闭]
text:关闭停火功能
displayType:action
buildSpeed:2s
removeGlobalTeamTags:停火辅助
pos:1
isVisible:if self.hasFlag(id=29)
addResources:unsetFlag:29

[action_销毁火]
text:开启销毁功能
description:开启后\n单位可以手动进行销毁\n但是要先进行验证身份\n点击获取验证码
displayType:action
buildSpeed:2s
pos:1
isVisible:if not self.hasFlag(id=24)
addResources:setFlag:28,setFlag:24
setUnitMemory:pw1=int(rnd(0,9)),pw2=int(rnd(0,9)),pw3=int(rnd(0,9)),pw4=int(rnd(0,9))
alsoTriggerAction:密码设置

[hiddenAction_密码设置]
setUnitMemory:password=memory.pw1+memory.pw2*10+memory.pw3*100+memory.pw4*1000
alsoTriggerAction:密码通知

[hiddenAction_密码通知]
showMessageToPlayer:AI:您本局的验证码为:%{memory.password},可在设置处验证身份

[action_消验证身份]
text:重新获取验证码
displayType:action
buildSpeed:2s
pos:1
isActive:true
isVisible:if self.hasFlag(id=28)
setUnitMemory:pw1=int(rnd(0,9)),pw2=int(rnd(0,9)),pw3=int(rnd(0,9)),pw4=int(rnd(0,9))
alsoTriggerAction:密码设置

[action_重置密码]

displayType:rally
text:重置
description:-
alwaysSinglePress:true
isVisible:if self.hasFlag(id=28)
setUnitMemory:now=0
buildSpeed:60

[action_显示]

pos:2
isVisible:if self.hasFlag(id=28)
displayType:infoOnly
text:当前输入:%{memory.now}

[action_输入1]

isLocked:false
displayType:rally
text:1
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+1
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入2]

isLocked:false
displayType:rally
text:2
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+2
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入3]

isLocked:false
displayType:rally
text:3
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+3
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入4]

isLocked:false
displayType:rally
text:4
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+4
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入5]

isLocked:false
displayType:rally
text:5
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+5
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入6]

isLocked:false
displayType:rally
text:6
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+6
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入7]

isLocked:false
displayType:rally
text:7
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+7
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入8]

isLocked:false
displayType:rally
text:8
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+8
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入9]

isLocked:false
displayType:rally
text:9
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+9
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[action_输入0]

isLocked:false
displayType:rally
text:0
description:-
alwaysSinglePress:true
setUnitMemory:now=memory.now*10+0
buildSpeed:60
isVisible:if self.hasFlag(id=28)

[hiddenAction_匹配]
autoTrigger:if memory.now == memory.password and not self.hasFlag(id=25) and memory.password > 0
displayType:infoOnly
text:正确
showMessageToPlayer:AI:验证码通过,你可以开启单位销毁功能了
addResources:setFlag:27,unsetFlag:28,setFlag:25
#spawnUnits:你被骗了

[hiddenAction_不匹配]
autoTrigger:if memory.now != memory.password and memory.now >= 1000
displayType:infoOnly
text:错误
setUnitMemory:now=0
showMessageToPlayer:AI:验证码不通过,请重新验证!


[action_销毁火llll]
text:开启销毁功能
description:开启后\n单位可以手动进行销毁
displayType:action
buildSpeed:2s
pos:1
addGlobalTeamTags:销毁
isVisible:if self.hasFlag(id=27) and not self.hasFlag(id=26)
addResources:setFlag:26

[action_消毁关闭]
text:关闭销毁功能
displayType:action
buildSpeed:2s
removeGlobalTeamTags:销毁
pos:1
addResources:unsetFlag:26
isVisible:if self.hasFlag(id=27) and self.hasFlag(id=26)

[graphics]
total_frames:1
image:ROOT:[WarField][战争之地]/-shared-/-贴图-/setting.png
image_shadow:AUTO
drawLayer:air
shadowOffsetX:1
shadowOffsetY:1
imageScale:0.7

[attack]
canOnlyAttackUnitsWithTags:接收器
canAttack:true
canAttackFlyingUnits:false
canAttackLandUnits:true
canAttackUnderwaterUnits:false
maxAttackRange:999999

[movement]
movementType:NONE
moveSpeed:0
maxTurnSpeed:0

[ai]
buildPriority:0